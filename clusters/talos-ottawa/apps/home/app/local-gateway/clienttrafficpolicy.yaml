apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: wildcard-lan
spec:
  clientIPDetection:
    xForwardedFor:
      numTrustedHops: 1
  targetRefs:
    - group: gateway.networking.k8s.io
      kind: Gateway
      name: public
    - group: gateway.networking.k8s.io
      kind: Gateway
      name: private
  clientIPDetection:
    xForwardedFor:
      numTrustedHops: 1
  timeout:
    http:
      requestReceivedTimeout: 0s  # No timeout for receiving requests
      idleTimeout: 3600s  # 1 hour idle timeout
      streamIdleTimeout: 900s  # 15 minutes for idle streams
  headers:
    requestID: PreserveOrGenerate  
  http2:
    initialStreamWindowSize: 64Ki 
    initialConnectionWindowSize: 1Mi 
    maxConcurrentStreams: 100