apiVersion: tailscale.com/v1alpha1
kind: ProxyGroup
metadata:
  name: common-egress
spec:
  hostnamePrefix: ${LOCATION}-common-egress
  tags:
    - tag:k8s
    - tag:${LOCATION}
  proxyClass: common-accept-routes
  type: egress
  replicas: 3
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyGroup
metadata:
  name: common-ingress
spec:
  hostnamePrefix: ${LOCATION}-common-ingress
  tags:
    - tag:k8s
    - tag:${LOCATION}
  proxyClass: common
  type: ingress
  replicas: 3
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyGroup
metadata:
  name: kubernetes-${LOCATION}
spec:
  type: kube-apiserver
  replicas: 3
  proxyClass: common
  tags:
    - tag:k8s-operator
    - tag:${LOCATION}
  kubeAPIServer:
    mode: auth