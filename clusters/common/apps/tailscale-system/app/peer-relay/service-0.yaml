apiVersion: v1
kind: Service
metadata:
  name: ${LOCATION}-sidecar-peer-relay-0
spec:
  type: LoadBalancer
  selector:
    app: ${LOCATION}-sidecar-peer-relay
    statefulset.kubernetes.io/pod-name: ${LOCATION}-sidecar-peer-relay-0
  ports:
  - name: relay
    port: 8888
    targetPort: 8888
    protocol: UDP
  - name: metrics
    port: 9002
    targetPort: 9002
    protocol: TCP
  - name: wireguard
    port: 41642
    targetPort: 41642
    protocol: TCP
  loadBalancerIP: ${CLUSTER_LOAD_BALANCER_CIDR%.*.*/*}.100.100
