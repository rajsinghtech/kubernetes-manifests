---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: harbor
spec:
  interval: 30m
  chart:
    spec:
      chart: harbor
      version: "*"
      sourceRef:
        kind: HelmRepository
        name: harbor
        namespace: flux-system
  values:
    externalURL: https://${LOCATION}-harbor.keiretsu.ts.net
    expose:
      annotations: 
        tailscale.com/expose: "true"
        tailscale.com/hostname: "${LOCATION}-harbor"
      type: loadBalancer
