apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: openwrt-vm
spec:
  running: true
  template:
    metadata:
      labels:
        kubevirt.io/domain: openwrt-vm
    spec:
      domain:
        devices:
          disks:
            - name: openwrt-install-disk
              disk:
                bus: virtio
        machine:
          type: ""
        resources:
          requests:
            memory: 256Mi
      volumes:
        - name: openwrt-install-disk
          persistentVolumeClaim:
            claimName: openwrt-install-disk
  dataVolumeTemplates: # Automatically a PVC of size 2Gi is created
    - metadata:
        name: openwrt-install-disk
      spec:
        pvc:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 2Gi
        source:
          http:
            url: https://mirrors.cicku.me/openwrt/releases/23.05.3/targets/x86/64/openwrt-23.05.3-x86-64-generic-ext4-combined.img.gz